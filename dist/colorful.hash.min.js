/* colorful.hash.min.js */
var CH=CH||{};CH.hex=function(t,n,i){return CH.create(t,n,i,CH.ENCODING.HEX)},CH.base64=function(t,n,i){return CH.create(t,n,i,CH.ENCODING.BASE64)},CH.uuid=function(t,n,i){var e=n.replace(new RegExp("-","g"),"");return CH.create(t,e,i,CH.ENCODING.HEX)},CH.create=function(t,n,i,e){var r=new CH.Element(t,CH.Scheme.fromColors(e,i),new CH.Hash(n,e));return r.draw(),r},CH.ENCODING={HEX:"hex",BASE64:"base64"},CH.CHARSET={HEX:["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],BASE64:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"]},CH.EXCEPTION_PREFIX="CH Exception: ",CH.Exception=function(){},CH.Exception.throw=function(t){throw CH.EXCEPTION_PREFIX+t},CH.Util=function(){},CH.Util.isNumber=function(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)},CH.Util.isString=function(t){return"string"==typeof t||t instanceof String},CH.Util.isRGBAValue=function(t){return CH.Util.isNumber(t)&&t>=0&&t<=1},CH.Util.isRange=function(t){return t instanceof CH.Range},CH.Util.isColor=function(t){return t instanceof CH.Color},CH.Util.isMap=function(t){return t instanceof CH.Map},CH.Util.isScheme=function(t){return t instanceof CH.Scheme},CH.Util.isHash=function(t){return t instanceof CH.Hash},CH.Util.isNullOrUndefined=function(t){return null===t||void 0===t},CH.Util.isArray=function(t){return Array.isArray(t)},CH.Hash=function(t,n){CH.Util.isString(t)||CH.Exception.throw("Hash '"+JSON.stringify(t)+"' is not a string.");var i=t.replace(new RegExp(" ","g"),"");switch(n){case CH.ENCODING.HEX:i=i.toLowerCase();for(var e=0;e<i.length;e++)CH.CHARSET.HEX.indexOf(i.charAt(e))<0&&CH.Exception.throw("'"+JSON.stringify(t)+"' is invalid HEX hash.");break;case CH.ENCODING.BASE64:i=i.replace(new RegExp("=","g"),"");for(var r=0;r<i.length;r++)CH.CHARSET.BASE64.indexOf(i.charAt(r))<0&&(console.log(i.charAt(r)),console.log(CH.CHARSET.BASE64.indexOf(i.charAt(r))),CH.Exception.throw("'"+JSON.stringify(t)+"' is invalid BASE64 hash."));break;default:CH.Exception.throw("Unknown encoding '"+JSON.stringify(n)+"'.")}this.raw=t,this.encoding=n,this.processed=i},CH.Hash.prototype.toNumbers=function(){var t=[];switch(this.encoding){case CH.ENCODING.HEX:for(var n=0;n<this.processed.length;n++)t.push(CH.CHARSET.HEX.indexOf(this.processed.charAt(n)));break;case CH.ENCODING.BASE64:for(var i=0;i<this.processed.length;i++)t.push(CH.CHARSET.BASE64.indexOf(this.processed.charAt(i)));break;default:return CH.Exception.throw("Unknown encoding '"+JSON.stringify(encoding)+"'."),[]}return t},CH.Hash.prototype.toCharacters=function(){return Array.from(this.processed)},CH.Range=function(t,n){this.left=0,this.right=0,CH.Util.isNumber(t)||CH.Exception.throw("Left bound '"+JSON.stringify(t)+"' is not a number."),CH.Util.isNumber(n)||CH.Exception.throw("Right bound '"+JSON.stringify(n)+"' is not a number."),t>=n&&CH.Exception.throw("Right bound '"+JSON.stringify(n)+"' is not larger than left bound '"+JSON.stringify(t)+"'."),this.left=t,this.right=n},CH.Range.prototype.containsValue=function(t){return CH.Util.isNumber(t)||CH.Exception.throw("Value '"+JSON.stringify(t)+"' is not a number."),t>=this.left&&t<this.right},CH.Range.prototype.containsRange=function(t){return CH.Util.isRange(t)||CH.Exception.throw("Range '"+JSON.stringify(t)+"' is not a range."),t.left>=this.left&&t.right<=this.right},CH.Color=function(t,n,i,e){CH.Util.isRGBAValue(t)||CH.Exception.throw("Red '"+JSON.stringify(t)+"' is not a valid color value."),CH.Util.isRGBAValue(n)||CH.Exception.throw("Green '"+JSON.stringify(n)+"' is not a valid color value."),CH.Util.isRGBAValue(i)||CH.Exception.throw("Blue '"+JSON.stringify(i)+"' is not a valid color value."),this.r=t,this.g=n,this.b=i,e?(CH.Util.isRGBAValue(e)||CH.Exception.throw("Alpha '"+JSON.stringify(e)+"' is not a valid color value."),this.a=e):this.a=1},CH.Color.prototype.toRGBAString=function(){return"rgba("+Math.floor(255*this.r)+" ,"+Math.floor(255*this.g)+" ,"+Math.floor(255*this.b)+" ,"+this.a+")"},CH.Color.copy=function(t){return CH.Util.isColor(t)||CH.Exception.throw("Invalid color '"+JSON.stringify(t)+"'."),new CH.Color(t.r,t.g,t.b,t.a)},CH.Color.fromString=function(t){var n;return CH.Util.isString(t)||CH.Exception.throw("String '"+JSON.stringify(t)+"' is not a string."),(n=t.match(/^#([0-9a-f]{3})$/i))&&n.length>1?new CH.Color(17*parseInt(n[1].charAt(0),16)/255,17*parseInt(n[1].charAt(1),16)/255,17*parseInt(n[1].charAt(2),16)/255):(n=t.match(/^#([0-9a-f]{6})$/i))&&n.length>1?new CH.Color(parseInt(n[1].substring(0,2),16)/255,parseInt(n[1].substring(2,4),16)/255,parseInt(n[1].substring(4,6),16)/255):(n=t.match(/^rgb\s*\(\s*(\d+|\d*.\d+)\s*,\s*(\d+|\d*.\d+)\s*,\s*(\d+|\d*.\d+)\s*\)$/i))&&n.length>3?new CH.Color(Math.min(Math.max(n[1],0),255)/255,Math.min(Math.max(n[2],0),255)/255,Math.min(Math.max(n[3],0),255)/255):(n=t.match(/^rgba\s*\(\s*(\d+|\d*.\d+)\s*,\s*(\d+|\d*.\d+)\s*,\s*(\d+|\d*.\d+)\s*,\s*(\d+|\d*.\d+)\s*\)$/i))&&n.length>4?new CH.Color(Math.min(Math.max(n[1],0),255)/255,Math.min(Math.max(n[2],0),255)/255,Math.min(Math.max(n[3],0),255)/255,Math.min(Math.max(n[4],0),1)):void CH.Exception.throw("Invalid color string '"+JSON.stringify(t)+"'.")},CH.Map=function(t,n){CH.Util.isRange(t)||CH.Exception.throw("Invalid range '"+JSON.stringify(t)+"'."),CH.Util.isColor(n)||CH.Exception.throw("Invalid color '"+JSON.stringify(n)+"'."),this.range=t,this.color=n},CH.Scheme=function(t){switch(this.range=new CH.Range(0,1),t){case CH.ENCODING.HEX:this.range.right=CH.CHARSET.HEX.length;break;case CH.ENCODING.BASE64:this.range.right=CH.CHARSET.BASE64.length;break;default:CH.Exception.throw("Unknown encoding '"+JSON.stringify(t)+"'.")}this.encoding=t,this.maps=[];for(var n=this.range.left;n<this.range.right;n++)this.maps.push(new CH.Map(new CH.Range(n,n+1),CH.Color.copy(new CH.Color(0,0,0))))},CH.Scheme.prototype.addMap=function(t){CH.Util.isMap(t)||CH.Exception.throw("Invalid map '"+JSON.stringify(t)+"'."),this.range.containsRange(t.range)||CH.Exception.throw("Map '"+JSON.stringify(t)+"' is out of scheme's range.");for(var n=0;n<this.maps.length;n++)t.range.containsRange(this.maps[n].range)&&(this.maps[n].color=CH.Color.copy(t.color))},CH.Scheme.prototype.getColor=function(t){CH.Util.isNumber(t)||CH.Exception.throw("Value '"+JSON.stringify(t)+"' is not a number.");for(var n=0;n<this.maps.length;n++)if(this.maps[n].range.containsValue(t))return CH.Color.copy(this.maps[n].color);CH.Exception.throw("Value '"+t+"' is not in scheme range.")},CH.Scheme.fromColors=function(t,n){var i=0;switch(t){case CH.ENCODING.HEX:i=CH.CHARSET.HEX.length;break;case CH.ENCODING.BASE64:i=CH.CHARSET.BASE64.length;break;default:CH.Exception.throw("Unknown encoding '"+JSON.stringify(t)+"'.")}CH.Util.isArray(n)||CH.Exception.throw("Colors '"+JSON.stringify(n)+"' is not an array."),n.length<2&&CH.Exception.throw("Length of colors '"+n.length+"' is less than 2."),n.length>i&&n.splice(i,n.length-i);for(var e=[],r=0;r<n.length;r++)e.push(CH.Color.fromString(n[r]));for(var o=e.length,s=new CH.Scheme(t),a=0,h=0;h<i;h++){h>(a+1)/(o-1)*(i-1)&&a++;var C=a/(o-1)*(i-1),H=(a+1)/(o-1)*(i-1);s.addMap(new CH.Map(new CH.Range(h,h+1),new CH.Color(e[a].r+(e[a+1].r-e[a].r)*(h-C)/(H-C),e[a].g+(e[a+1].g-e[a].g)*(h-C)/(H-C),e[a].b+(e[a+1].b-e[a].b)*(h-C)/(H-C),e[a].a+(e[a+1].a-e[a].a)*(h-C)/(H-C))))}return s},CH.Element=function(t,n,i){CH.Util.isString(t)||CH.Exception.throw("Element id '"+JSON.stringify(t)+"' is not a string."),this.id=t,this.element=document.getElementById(t),CH.Util.isNullOrUndefined(this.element)&&CH.Exception.throw("Can't find element with id '"+JSON.stringify(t)+"'."),CH.Util.isScheme(n)||CH.Exception.throw("Invalid scheme '"+JSON.stringify(n)+"'."),this.scheme=n,CH.Util.isHash(i)||CH.Exception.throw("Invalid hash '"+JSON.stringify(i)+"'."),this.hash=i},CH.Element.prototype.draw=function(){for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild);for(var t=this.hash.toNumbers(),n=0,i=0;i<t.length;i++){var e=document.createElementNS("http://www.w3.org/2000/svg","rect");e.setAttribute("x",n+"%");var r=100/t.length*(i+1);e.setAttribute("y","0%"),e.setAttribute("width",1.05*(r-n)+"%"),e.setAttribute("height","100%"),e.setAttribute("fill",this.scheme.getColor(t[i]).toRGBAString()),this.element.appendChild(e),n=r}},CH.Element.prototype.setHash=function(t){this.hash=new CH.Hash(t,this.hash.encoding),this.draw()},CH.Element.prototype.setColors=function(t){this.scheme=CH.Scheme.fromColors(this.scheme.encoding,t),this.draw()};