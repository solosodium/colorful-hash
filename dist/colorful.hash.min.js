/* colorful.hash.min.js */
var CH=CH||{};CH.hex=function(t,e,i,n){new CH.Element(t)},CH.ENCODING={HEX:"hex",BASE64:"base64"},CH.CHARSET={HEX:["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],BASE64:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p"," q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"]},CH.UUID_REGEX=new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"),CH.MSG_PREFIX="[colorful-hash] ",CH.MSG_LEVEL=3,CH.EXCEPTION_PREFIX="Exception: ",CH.Exception=function(){},CH.Exception.throw=function(t){throw CH.EXCEPTION_PREFIX+t},CH.Msg=function(){},CH.Msg.log=function(t){CH.MSG_LEVEL>2&&console.log(CH.MSG_PREFIX+t)},CH.Msg.warn=function(t){CH.MSG_LEVEL>1&&console.warn(CH.MSG_PREFIX+t)},CH.Msg.error=function(t){CH.MSG_LEVEL>0&&console.error(CH.MSG_PREFIX+t)},CH.Util=function(){},CH.Util.isNumber=function(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)},CH.Util.isString=function(t){return"string"==typeof t||t instanceof String},CH.Util.isRGBAValue=function(t){return CH.Util.isNumber(t)&&t>=0&&t<=1},CH.Util.isRange=function(t){return t instanceof CH.Range},CH.Util.isColor=function(t){return t instanceof CH.Color},CH.Util.isMap=function(t){return t instanceof CH.Map},CH.Util.isScheme=function(t){return t instanceof CH.Scheme},CH.Util.isHash=function(t){return t instanceof CH.Hash},CH.Util.isNullOrUndefined=function(t){return null===t||void 0===t},CH.Hash=function(t,e){CH.Util.isString(t)||CH.Exception.throw("Hash '"+t+"' is not a string.");var i=t.replace(new RegExp(" ","g"),"");switch(e){case CH.ENCODING.HEX:i=i.toLowerCase();for(var n=0;n<i.length;n++)CH.CHARSET.HEX.indexOf(i.charAt(n))<0&&CH.Exception.throw("'"+t+"' is invalid HEX hash.");break;case CH.ENCODING.BASE64:i=i.replace(new RegExp("=","g"),"");for(var r=0;r<i.length;r++)CH.CHARSET.BASE64.indexOf(i.charAt(r))<0&&CH.Exception.throw("'"+t+"' is invalid BASE64 hash.");break;default:CH.Exception.throw("Unknown encoding '"+e+"'.")}this.raw=t,this.encoding=e,this.processed=i},CH.Hash.prototype.toNumbers=function(){var t=[];switch(this.encoding){case CH.ENCODING.HEX:for(var e=0;e<this.processed.length;e++)t.push(CH.CHARSET.HEX.indexOf(this.processed.charAt(e)));break;case CH.ENCODING.BASE64:for(var i=0;i<this.processed.length;i++)t.push(CH.CHARSET.BASE64.indexOf(this.processed.charAt(i)));break;default:return CH.Msg.error("Unknown encoding '"+encoding+"'."),[]}return t},CH.Hash.prototype.toCharacters=function(){return Array.from(this.processed)},CH.Uuid=function(t){this.uuid="","string"==typeof t||t instanceof String||CH.Exception.throw("UUID '"+t+"' is not a string.");var e=t.match(CH.UUID_REGEX);e&&0!==e.length||CH.Exception.throw("UUID '"+t+"' doesn't match format."),this.uuid=t},CH.Uuid.prototype.toHash=function(){return new CH.Hash(this.uuid.replace(new RegExp("-","g"),""),CH.ENCODING.HEX)},CH.Range=function(t,e){this.left=0,this.right=0,CH.Util.isNumber(t)||CH.Exception.throw("Left bound '"+t+"' is not a number."),CH.Util.isNumber(e)||CH.Exception.throw("Right bound '"+e+"' is not a number."),t>=e&&CH.Exception.throw("Right bound '"+e+"' is not larger than left bound '"+t+"'."),this.left=t,this.right=e},CH.Range.prototype.containsValue=function(t){return CH.Util.isNumber(t)?t>=this.left&&t<this.right:(CH.Msg.error("Value '"+t+"' is not a number."),!1)},CH.Range.prototype.containsRange=function(t){return CH.Util.isRange(t)?t.left>=this.left&&t.right<=this.right:(CH.Msg.error("Range '"+JSON.stringify(t)+"' is not a range."),!1)},CH.Color=function(t,e,i,n){if(this.r=0,this.g=0,this.b=0,this.a=0,CH.Util.isRGBAValue(t))if(CH.Util.isRGBAValue(e))if(CH.Util.isRGBAValue(i))if(this.r=t,this.g=e,this.b=i,n){if(!CH.Util.isRGBAValue(n))return void CH.Msg.error("Alpha '"+n+"' is not a valid value. Should between 0 and 1.");this.a=n}else this.a=1;else CH.Msg.error("Blue '"+i+"' is not a valid value. Should between 0 and 1.");else CH.Msg.error("Green '"+e+"' is not a valid value. Should between 0 and 1.");else CH.Msg.error("Red '"+t+"' is not a valid value. Should between 0 and 1.")},CH.Color.prototype.toRGBAString=function(){return"rgba("+Math.floor(255*this.r)+" ,"+Math.floor(255*this.g)+" ,"+Math.floor(255*this.b)+" ,"+this.a+")"},CH.Color.copy=function(t){if(CH.Util.isColor(t))return new CH.Color(t.r,t.g,t.b,t.a);CH.Msg.error("Invalid color '"+JSON.stringify(t)+"'.")},CH.Map=function(t,e){CH.Util.isRange(t)||CH.Exception.throw("Invalid range '"+JSON.stringify(t)+"'."),CH.Util.isColor(e)||CH.Exception.throw("Invalid color '"+JSON.stringify(e)+"'."),this.range=t,this.color=e},CH.Scheme=function(t){switch(this.defaultColor=new CH.Color(0,0,0),this.range=new CH.Range(0,1),this.maps=[],t){case CH.ENCODING.HEX:this.range.right=CH.CHARSET.HEX.length;break;case CH.ENCODING.BASE64:this.range.right=CH.CHARSET.BASE64.length;break;default:CH.Msg.error("Unknown encoding '"+t+"'.")}for(var e=this.range.left;e<this.range.right;e++)this.maps.push(new CH.Map(new CH.Range(e,e+1),CH.Color.copy(this.defaultColor)))},CH.Scheme.prototype.addMap=function(t){if(CH.Util.isMap(t))if(this.range.containsRange(t.range))for(var e=0;e<this.maps.length;e++)t.range.containsRange(this.maps[e].range)&&(this.maps[e].color=CH.Color.copy(t.color));else CH.Msg.error("Map '"+JSON.stringify(t)+"' is out of scheme's range.");else CH.Msg.error("Invalid map '"+JSON.stringify(t)+"'.")},CH.Scheme.prototype.getColor=function(t){if(!CH.Util.isNumber(t))return CH.Msg.error("Value '"+t+"' is not a number."),CH.Color.copy(this.defaultColor);for(var e=0;e<this.maps.length;e++)if(this.maps[e].range.containsValue(t))return CH.Color.copy(this.maps[e].color);return new CH.Color.copy(this.defaultColor)},CH.Scheme.twoColorLinear=function(t,e,i){if(CH.Util.isColor(e)){if(CH.Util.isColor(i)){var n=0;switch(t){case CH.ENCODING.HEX:n=CH.CHARSET.HEX.length;break;case CH.ENCODING.BASE64:n=CH.CHARSET.BASE64.length;break;default:return void CH.Msg.error("Unknown encoding '"+t+"'.")}for(var r=new CH.Scheme(CH.ENCODING.HEX),o=0;o<n;o++)r.addMap(new CH.Map(new CH.Range(o,o+1),new CH.Color(e.r+(i.r-e.r)*o/(n-1),e.g+(i.g-e.g)*o/(n-1),e.b+(i.b-e.b)*o/(n-1),e.a+(i.a-e.a)*o/(n-1))));return r}CH.Msg.error("Invalid colorB '"+JSON.stringify(i)+"'.")}else CH.Msg.error("Invalid colorA '"+JSON.stringify(e)+"'.")},CH.Element=function(t,e,i){CH.Util.isString(t)||CH.Exception.throw("Element id '"+t+"' is not a string."),this.id=t,this.element=document.getElementById(t),CH.Util.isNullOrUndefined(this.element)&&CH.Exception.throw("Can't find element with id '"+t+"'."),CH.Util.isScheme(e)||CH.Exception.throw("Invalid scheme '"+JSON.stringify(e)+"'."),this.scheme=e,CH.Util.isHash(i)||CH.Exception.throw("Invalid hash '"+JSON.stringify(i)+"'."),this.hash=i},CH.Element.prototype.draw=function(){for(var t=this.hash.toNumbers(),e=0;e<t.length;e++){var i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttribute("x",100/t.length*e+"%"),i.setAttribute("y",0),i.setAttribute("width",100/t.length*1.02+"%"),i.setAttribute("height","100%"),i.setAttribute("fill",this.scheme.getColor(t[e]).toRGBAString()),this.element.appendChild(i)}};