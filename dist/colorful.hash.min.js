/* colorful.hash.min.js */
var CH=CH||{};CH.ENCODING={HEX:"hex",BASE64:"base64"},CH.CHARSET={HEX:["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],BASE64:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p"," q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"]},CH.UUID_REGEX=new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"),CH.MSG_PREFIX="[colorful-hash] ",CH.MSG_LEVEL=3,CH.Msg=function(){},CH.Msg.log=function(e){CH.MSG_LEVEL>2&&console.log(CH.MSG_PREFIX+e)},CH.Msg.warn=function(e){CH.MSG_LEVEL>1&&console.warn(CH.MSG_PREFIX+e)},CH.Msg.error=function(e){CH.MSG_LEVEL>0&&console.error(CH.MSG_PREFIX+e)},CH.Util=function(){},CH.Util.isNumber=function(e){return!isNaN(e)&&isFinite(e)},CH.Util.isString=function(e){return"string"==typeof e||e instanceof String},CH.Util.isRGBA=function(e){return CH.Util.isNumber(e)&&e>=0&&e<=1},CH.Util.isRange=function(e){return e instanceof CH.Range},CH.Util.isColor=function(e){return e instanceof CH.Color},CH.Util.isMap=function(e){return e instanceof CH.Map},CH.Util.isScheme=function(e){return e instanceof CH.Scheme},CH.Util.isHash=function(e){return e instanceof CH.Hash},CH.Util.isNullOrUndefined=function(e){return null===e||void 0===e},CH.Hash=function(e,t){if(this.raw="",this.processed="",this.encoding="",CH.Util.isString(e)){switch(this.processed=e.replace(new RegExp(" ","g"),""),t){case CH.ENCODING.HEX:this.processed=this.processed.toLowerCase();for(var r=0;r<this.processed.length;r++)if(CH.CHARSET.HEX.indexOf(this.processed.charAt(r))<0)return void CH.Msg.error("'"+e+"' is invalid HEX hash.");break;case CH.ENCODING.BASE64:this.processed=this.processed.replace(new RegExp("=","g"),"");for(var i=0;i<this.processed.length;i++)if(CH.CHARSET.BASE64.indexOf(this.processed.charAt(i))<0)return void CH.Msg.error("'"+e+"' is invalid BASE64 hash.");break;default:return void CH.Msg.error("Unknown encoding '"+t+"'.")}this.raw=e,this.encoding=t}else CH.Msg.error("Hash '"+e+"' is not a string.")},CH.Hash.prototype.toNumbers=function(){var e=[];switch(this.encoding){case CH.ENCODING.HEX:for(var t=0;t<this.processed.length;t++)e.push(CH.CHARSET.HEX.indexOf(this.processed.charAt(t)));break;case CH.ENCODING.BASE64:for(var r=0;r<this.processed.length;r++)e.push(CH.CHARSET.BASE64.indexOf(this.processed.charAt(r)));break;default:return CH.Msg.error("Unknown encoding '"+encoding+"'."),[]}return e},CH.Hash.prototype.toCharacters=function(){return Array.from(this.processed)},CH.Uuid=function(e){if(this.uuid="","string"==typeof e||e instanceof String){var t=e.match(CH.UUID_REGEX);t&&0!==t.length?this.uuid=e:CH.Msg.error("UUID '"+e+"' doesn't match format.")}else CH.Msg.error("UUID '"+e+"' is not a string.")},CH.Uuid.prototype.toHash=function(){return this.uuid.replace(new RegExp("-","g"),"")},CH.Range=function(e,t){this.left=0,this.right=0,CH.Util.isNumber(e)?CH.Util.isNumber(t)?e>=t?CH.Msg.error("Right bound '"+t+"' is not larger than left bound '"+e+"'."):(this.left=e,this.right=t):CH.Msg.error("Right bound '"+t+"' is not a number."):CH.Msg.error("Left bound '"+e+"' is not a number.")},CH.Range.prototype.containsValue=function(e){return CH.Util.isNumber(e)?e>=this.left&&e<this.right:(CH.Msg.error("Value '"+e+"' is not a number."),!1)},CH.Range.prototype.containsRange=function(e){return CH.Util.isRange(e)?e.left>=this.left&&e.right<=this.right:(CH.Msg.error("Range '"+JSON.stringify(e)+"' is not a range."),!1)},CH.Color=function(e,t,r,i){if(this.r=0,this.g=0,this.b=0,this.a=0,CH.Util.isRGBA(e))if(CH.Util.isRGBA(t))if(CH.Util.isRGBA(r))if(this.r=e,this.g=t,this.b=r,i){if(!CH.Util.isRGBA(i))return void CH.Msg.error("Alpha '"+i+"' is not a valid value. Should between 0 and 1.");this.a=i}else this.a=1;else CH.Msg.error("Blue '"+r+"' is not a valid value. Should between 0 and 1.");else CH.Msg.error("Green '"+t+"' is not a valid value. Should between 0 and 1.");else CH.Msg.error("Red '"+e+"' is not a valid value. Should between 0 and 1.")},CH.Color.prototype.toRGBAString=function(){return"rgba("+Math.floor(255*this.r)+" ,"+Math.floor(255*this.g)+" ,"+Math.floor(255*this.b)+" ,"+this.a+")"},CH.Color.copy=function(e){if(CH.Util.isColor(e))return new CH.Color(e.r,e.g,e.b,e.a);CH.Msg.error("Invalid color '"+JSON.stringify(e)+"'.")},CH.Map=function(e,t){CH.Util.isRange(e)?CH.Util.isColor(t)?(this.range=e,this.color=t):CH.Msg.error("Invalid color '"+JSON.stringify(t)+"'."):CH.Msg.error("Invalid range '"+JSON.stringify(e)+"'.")},function(){CH.Scheme=function(e){switch(this.defaultColor=new CH.Color(0,0,0),this.range=new CH.Range(0,1),this.maps=[],e){case CH.ENCODING.HEX:this.range.right=CH.CHARSET.HEX.length;break;case CH.ENCODING.BASE64:this.range.right=CH.CHARSET.BASE64.length;break;default:CH.Msg.error("Unknown encoding '"+e+"'.")}for(var t=this.range.left;t<this.range.right;t++)this.maps.push(new CH.Map(new CH.Range(t,t+1),CH.Color.copy(this.defaultColor)))},CH.Scheme.prototype.addMap=function(e){if(CH.Util.isMap(e))if(this.range.containsRange(e.range))for(var t=0;t<this.maps.length;t++)e.range.containsRange(this.maps[t].range)&&(this.maps[t].color=CH.Color.copy(e.color));else CH.Msg.error("Map '"+JSON.stringify(e)+"' is out of scheme's range.");else CH.Msg.error("Invalid map '"+JSON.stringify(e)+"'.")},CH.Scheme.prototype.getColor=function(e){if(!CH.Util.isNumber(e))return CH.Msg.error("Value '"+e+"' is not a number."),CH.Color.copy(this.defaultColor);for(var t=0;t<this.maps.length;t++)if(this.maps[t].range.containsValue(e))return CH.Color.copy(this.maps[t].color);return new CH.Color.copy(this.defaultColor)},CH.Scheme.twoColorLinear=function(e,t,r){if(CH.Util.isColor(t)){if(CH.Util.isColor(r)){var i=0;switch(e){case CH.ENCODING.HEX:i=CH.CHARSET.HEX.length;break;case CH.ENCODING.BASE64:i=CH.CHARSET.BASE64.length;break;default:return void CH.Msg.error("Unknown encoding '"+e+"'.")}for(var n=new CH.Scheme(CH.ENCODING.HEX),s=0;s<i;s++)n.addMap(new CH.Map(new CH.Range(s,s+1),new CH.Color(t.r+(r.r-t.r)*s/(i-1),t.g+(r.g-t.g)*s/(i-1),t.b+(r.b-t.b)*s/(i-1),t.a+(r.a-t.a)*s/(i-1))));return n}CH.Msg.error("Invalid colorB '"+JSON.stringify(r)+"'.")}else CH.Msg.error("Invalid colorA '"+JSON.stringify(t)+"'.")};var e=CH.Scheme.twoColorLinear(CH.ENCODING.HEX,new CH.Color(.5,.2,.1),new CH.Color(.6,1,.3));console.log(e)}(),CH.Element=function(e,t,r){CH.Util.isString(e)?(this.id=e,this.element=document.getElementById(e),CH.Util.isNullOrUndefined(this.element)&&CH.Msg.error("Can't find element with id '"+e+"'.")):CH.Msg.error("Element id '"+e+"' is not a string.")},CH.Element.prototype.setHash=function(e){CH.Util.isHash(e)?this.hash=e:CH.Msg.error("Invalid hash '"+JSON.stringify(e)+"'.")},CH.Element.prototype.setScheme=function(e){CH.Util.isScheme(e)?this.scheme=e:CH.Msg.error("Invalid scheme '"+JSON.stringify(e)+"'.")},CH.Element.prototype.draw=function(){for(var e=parseInt(this.element.getAttribute("width"),10),t=this.element.getAttribute("width").replace(e.toString(),""),r=this.element.getAttribute("height"),i=this.hash.toNumbers(),n=0;n<i.length;n++){var s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("x",e/i.length*n+t),s.setAttribute("y",0),s.setAttribute("width",e/i.length*1.02+t),s.setAttribute("height",r),s.setAttribute("fill",this.scheme.getColor(i[n]).toRGBAString()),this.element.appendChild(s)}};